# XMPanel Configuration Example
# Copy this file to config.yaml and modify as needed

server:
  address: ":8080"
  tls:
    enabled: false
    cert_file: ""
    key_file: ""

database:
  driver: "sqlite"  # sqlite or postgres
  dsn: "xmpanel.db"
  encryption_key: ""  # Base64 encoded 32-byte key for encrypting sensitive data
  max_open_conns: 25
  max_idle_conns: 5
  conn_max_lifetime: "5m"

security:
  jwt:
    secret: "CHANGE_THIS_TO_A_SECURE_RANDOM_STRING"  # At least 32 characters
    access_token_ttl: 15m
    refresh_token_ttl: 168h  # 7 days
    issuer: "xmpanel"

  mfa:
    enabled: true
    issuer: "XMPanel"
    required: false  # If true, all users must enable MFA

  password:
    min_length: 12
    require_upper: true
    require_lower: true
    require_number: true
    require_special: false
    argon2_time: 3
    argon2_memory: 65536  # 64MB
    argon2_threads: 4
    max_login_attempts: 5
    lockout_duration: 15m

  rate_limit:
    enabled: true
    requests_per_second: 100
    burst: 200
    login_attempts: 5
    login_window: 15m

  cors:
    allowed_origins:
      - "http://localhost:5173"  # Vite dev server
    allowed_methods:
      - "GET"
      - "POST"
      - "PUT"
      - "DELETE"
      - "OPTIONS"
    allowed_headers:
      - "Authorization"
      - "Content-Type"
      - "X-CSRF-Token"
      - "X-Request-ID"
    allow_credentials: true
    max_age: 86400

# XMPP servers can be configured here or added via the web UI
xmpp:
  servers: []
  # - id: "prosody-main"
  #   name: "Main Prosody Server"
  #   type: "prosody"
  #   host: "xmpp.example.com"
  #   port: 5280
  #   api_key: "your-api-key"
  #   tls: true
  #   enabled: true
